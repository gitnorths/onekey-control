import{r as c,i as E,e as i,f as _,d as N,w as o,a as U,b as t,h as p,c as F,k as L,u as M,l as T,E as v,m as P}from"./index-c88748e7.js";const j={class:"dialog-footer"},q={key:0},A={__name:"uploadModal",props:{visible:{type:Boolean,default:!1},title:{type:String,default:"模型导入"},width:{type:String,default:"50%"},url:{type:String,default:""}},emits:["cancel","confirm"],setup(g,{emit:h}){const y=h;let a=c();const d=g,b=E({}),f=c(),r=c([]),s=c(!1),w=(e,l)=>{console.log(e,l)},k=e=>{console.log(e)},B=e=>{s.value=!1,e.code==0?(v({message:"上传成功！",type:"success"}),m()):v.error(e.desc)},x=(e,l)=>P.confirm(`确定删除已选择的文件 - ${e.name} ?`,{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then(()=>!0,()=>!1),V=()=>{s.value=!0,f.value.submit()},m=()=>{y("cancel",!1)};return(e,l)=>{const u=i("el-button"),C=i("el-upload"),R=i("el-form"),S=i("el-dialog");return _(),N(S,{modelValue:M(a),"onUpdate:modelValue":l[1]||(l[1]=n=>T(a)?a.value=n:a=n),title:d.title,width:d.width,"show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":"","modal-class":"dialog-import"},{footer:o(()=>[U("span",j,[t(u,{onClick:m},{default:o(()=>[p("取消")]),_:1}),t(u,{type:"primary",disabled:r.value.length==0,loading:s.value,onClick:V},{default:o(()=>[p(" 上传"),s.value?(_(),F("span",q,"中")):L("",!0)]),_:1},8,["disabled","loading"])])]),default:o(()=>[t(R,{model:b},{default:o(()=>[t(C,{ref_key:"uploadRef",ref:f,"file-list":r.value,"onUpdate:fileList":l[0]||(l[0]=n=>r.value=n),class:"upload-demo",action:d.url,"auto-upload":!1,multiple:"",accept:"file",limit:1,"on-preview":k,"on-remove":w,"before-remove":x,"on-success":B},{tip:o(()=>[]),default:o(()=>[t(u,{type:"primary"},{default:o(()=>[p("选择上传文件")]),_:1})]),_:1},8,["file-list","action"])]),_:1},8,["model"])]),_:1},8,["modelValue","title","width"])}}};export{A as _};
